<!DOCTYPE html>
<html>
<head>
	<title>Cashew Web Parser</title>
  <meta charset="utf-8">
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
    }
    textarea { font-size: 18px; }
  </style>
  <script src="cashew.js"></script>
  <script src="escodegen.browser.js"></script>
	<script>
    (function () {
      var oldLog = console.log;
      console.log = function(message){
        outputText.value += message + "\n";
        oldLog.apply(console, arguments);
      };
    })();

    var Cashew = cashew.Cashew;

    function submitCode(){
      outputText.value = "";
      var code =document.getElementById('codeArea').value;
      try{
        var ast = Cashew(code);
        //Display the AST text
        astText.value = JSON.stringify(ast, null, 2);
         //Generate and display the JS code
        var js = escodegen.generate(ast);
        js = "(function(___JavaRuntime){" + js + "})(cashew.___JavaRuntime);";
        jsText.value = js;

        //Execute the transpiled code
        eval(js);
      }catch(err){
        astText.value = err;
      }
    }     
	</script>

</head>
<body>
	<div>
    <span>Cashew Web Parser </span><button onclick='submitCode()'>Parse it!</button>
  </div>
  <textarea id="codeArea" style="border: 1px solid black; width:49%; height:30%;">public class MyClass
    {
       /** main method */
       public static void main(String[] args)
       {
          System.out.println("Type your code here");
       }
    }
  </textarea>
  <textarea id="jsText" style="border: 1px solid blue; width: 49%; height: 30%; " readonly="true"></textarea>
  <textarea id="astText" style="border: 1px solid purple; width: 49%; height: 69%; " readonly="true"></textarea>
  <textarea id="outputText" style="border: 1px solid green; width: 49%; height: 69%; " readonly="true"></textarea>
</body>
</html>